# 俄罗斯方块游戏需求文档

## 基本玩法

标准俄罗斯方块规则，10×20 的棋盘，7 种经典方块形状，霓虹风格视觉效果。

## 按键操作

| 按键  |           功能            |
|-------|--------------------------|
| ← →   | 左右移动（长按自动加速）   |
| ↑     | 旋转方块                  |
| ↓     | 加速下落（长按自动加速）   |
| SPACE | 硬降到底                  |
| R     | 重新开始                  |
| H     | 打开/关闭帮助             |

## 计分规则

**倍率** = 2^(关卡-1)

**消行得分** = 行数² × 倍率
- 1行: 1 × 倍率
- 2行: 4 × 倍率
- 3行: 9 × 倍率
- 4行 (Tetris): 16 × 倍率

**连击加分** = 2^(连击数-1) × 关卡²
- 第1次消行：无连击加分
- 第2次：+2×关卡²
- 第3次：+4×关卡²
- 以此类推，中断后重置

**每次得分** = 消行得分 + 连击加分

## 关卡与速度

- 每消除 10行 升一关
- 初始下落间隔 1.0 秒，每关减少 0.08 秒
- 最快速度 0.08 秒/格（约第12关达到上限）
- 升关时触发彩虹特效 + 屏幕震动

## 视觉效果

### 方块渲染（霓虹玻璃风格）

- 7种霓虹配色（粉红、青色、黄色、绿色、橙色、紫色、蓝色）
- 每个方块有：外层光晕、玻璃质感半透明填充、顶部高光条、左边缘高光、右下角阴影、亮色霓虹边框
- 方块颜色随时间轻微呼吸闪烁（sin 波动 ±10%）

### 幽灵方块

- 显示当前方块的落点预览，半透明轮廓

### 下落轨迹（Trail）

- 方块移动时留下渐隐的残影

### 消行特效

- 水平闪光扫过整行
- 多行消除时有扩散光晕环
- 扫描线（scan line）从消除行向上扫过
- 粒子爆炸：每格生成 4+行数×3 个粒子，带拖尾轨迹，受重力影响

### 升关特效

- 全屏彩虹色叠加（持续2秒）
- 屏幕震动（持续1秒，振幅随时间衰减）
- 关卡数字抖动显示

### 浮动文字

- 消行时弹出得分提示--消行得分（如 +16）
- 连击时显示 COMBO x3! +8（连击数 + 连击加分）
- 四行消除显示 TETRIS! +XX（连击加分）

### 背景

- 深色星空背景，80颗星星大小位置随机，随时间随机闪烁
- 游戏区域棋盘格底纹
- 右侧面板渐变背景 + 动态扫描线
- 面板左边框有流动霓虹光晕

### 界面装饰

- 左侧区域四周有彩色小灯泡边框，各自独立闪烁
- 右侧TETRIS文字下有一排分隔灯泡

## 界面布局

```
┌──────────────────┬──────────────┐
│                  │  TETRIS      │
│   游戏区域        │  ────────    │
│   320×640px      │  NEXT (预览) │
│   (10×20格)      │  BEST        │
│                  │  SCORE       │
│                  │  LINES       │
│                  │  LEVEL       │
│                  │  H 帮助      │
└──────────────────┴──────────────┘
```
### 游戏区域

- 10×20 网格
- 顶部有 2 行缓冲区，用于新方块生成

### 右侧面板

- TETRIS标题（居中显示）
- 显示下一个方块预览
- 显示最高纪录（最高分纪录显示较下方的都大一些）
- 显示当前得分
- 显示已消行数
- 显示当前关卡
- 显示帮助按钮 H（与底部对齐）

## 游戏状态

- **开始界面**：显示操作说明和得分规则，按 SPACE 开始
- **帮助界面**：详细规则说明，按 H 关闭
- **游戏中**：正常游玩
- **Game Over**：方块无法在顶部生成时触发，显示最终得分，按 R 重开

## 游戏结束

新方块生成时与已有方块重叠即 Game Over，保存最高纪录在本地。